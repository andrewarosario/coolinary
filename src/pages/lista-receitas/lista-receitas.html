<ion-header>
    <ion-navbar color="primary">

        <button *ngIf="!toggled" ion-button menuToggle="menu-geral">
            <ion-icon name="menu"></ion-icon>
        </button>
        
        <ion-title *ngIf="!toggled">{{ titulo }}</ion-title>
        
        <ion-searchbar class="barra-busca"
            *ngIf="toggled" 
            [animated]="true"
            [(ngModel)]="searchTerm" 
            [showCancelButton]="true" 
            (ionCancel)="toggleSearch()" 
            (ionInput)="buscarReceitas($event)"
            placeholder="Buscar receitas">
        </ion-searchbar>
          
        <ion-buttons start *ngIf="!toggled">
            <button ion-button icon-only (click)="toggleSearch()">
                <ion-icon name="search"></ion-icon>
            </button>
        
            <button ion-button                    
                    (click)="carregarReceitas()">
                <ion-icon class="botao-atualiza" name="md-refresh"></ion-icon>
            </button>

        </ion-buttons> 
    </ion-navbar>

</ion-header>

<ion-content>

    <ion-refresher (ionRefresh)="atualizaPagina($event)" [pullMin]=95>
        <ion-refresher-content
            pullingIcon="arrow-dropDown"
            pullingText="Deslize para atualizar"
            refreshingSpinner="circles"
            refreshingText="Aguarde...">
        </ion-refresher-content>
    </ion-refresher>

    <ion-card class="card" *ngFor="let receita of receitas" (click)="abrirReceita(receita)">

        <img [src]="receita.imagem"/>
        <ion-card-content>
            <h1>{{receita.titulo}}</h1>
        </ion-card-content>

        <barra-porcentagem-receita [porcentagem]="receita.porcentagemIngredientes"
                                   [texto]="receita.textoIngredientesPossui">
        </barra-porcentagem-receita>
        
        <ion-chip *ngFor="let tag of receita.tags" color="secondary">
            <ion-label>{{tag}}</ion-label>
        </ion-chip>

        <ion-item>
            <button ion-button icon-left clear item-left>
                <ion-icon name="alarm"></ion-icon>
                {{receita.tempoPreparo}}
            </button>
            <button ion-button icon-left clear item-left>
                <ion-icon name="restaurant"></ion-icon>
                {{receita.porcoes}}
            </button>
            <button ion-button icon-left clear item-end>
                <ion-icon name="heart" color="danger"></ion-icon>          
            </button>
        </ion-item>

    </ion-card>
</ion-content>